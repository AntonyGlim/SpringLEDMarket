**План:**  
* разбор ДЗ  
* Как подключить RabbitMQ к Spring  
* Наш магазин как кукБук  
* Тема Spring тестирование (принципы, аннотации, подключение к БД)  
* Как подключится к ВК на RESTTemplate  
  
**0:04** Вопрос про связь микросервисов    
**0:11** подключение к ВК  
**0:12** Зайти в раздел для разработчиков получить клиент и сикрет. (общение через RestTemplate)  
**0:16** Запуска приложения  
**0:17** Разбор того что происходит по шагам  
**0:18** мы в начале получаем токен, а потом обращаемся к VK. Используем JsonParser  
**0:23** Можем токен положить в сессию, чтобы каждый раз не вводить  
**0:25** Тесты  
**0:26** Подключаем тесты в поме и hamcrest для продвинутого тестирования. h2database для тестирования тестов  
**0:27** Список того, что необходимо для проекта JUnit, Spring Test & Spring Boot Test, AssertJ, Hamcrest, Mockito, JSONassert, JsonPath  
**0:30** Аннотации @SpringBootTest и RunWith  
**0:31** Тестирование корзины (сервер не запускается, если не укжем спец. параметр)  
**0:33** Запуск всего сервака и стучимся на endPoint  
**0:34** Папка testMigration - для запуска базы  
**0:35** Класс TestRestTemplate  
**0:36** @JsonTest - для проверки сериализации и десереализации (класс JacksaonTester)  
**0:40** @AutoConfigureMockMvc - как эмуляция сервера (класс MockMvc) cтучим на адресс и проверяем  
**0:43** @WithMockUser и @WithAnonimousUser - создание фиктивного пользователя  
**0:45** Проверка куда перекинет залогиненного  
**0:49** Исправил ошибку в тесте  
**0:49** Тестирование только слоя контроллеров - не работает а тянет безопасность Тестирование отдельных элементов (например сервисы) Используем Моки (@MockBean)   
**1:00** Моки можно создават из объектов  
**1:02** @Spy (из библиотеки макито) - очень похоже на мок. Отличается от Мок тем, что можем подменять проверяемый о-кт. (ПОЧИТАТЬ)  
  
**1:05 - 1:11** Перерыв  
  
**1:11 - 1:15** Поиск бага  
**1:15** Тестирование RESTController  
**1:17** JsonPath. символ $ - это ссылка на самого себя  
**1:20** Ссылка на JsonPath  
**1:21** Тестирования работы с ДБ (в нашем случае H2) Аннотация @DataJpaTest. Все происходит в рамках транзакций. Чтобы отменить - спец. аргумент в анотации   
**1:24** TestEntityManager - хорошо работает с FlyWay  
**1:25** Для работы напрямую - своя аннотация  
**1:27** Настройка inMemoruDataBase т.к. диалекты чуть разные. проперрти в ресурсах тестов.   
**1:28** режим совместимости с постгрес и настройка FlyWay  
**1:31** Как прописать откуда брать настройки тестов  
**1:32** Закончили тесты   
**1:33** Автоматизация тестирования (тестирование снаружи)  
**1:34** Создание отдельного пакета тестов  
**1:35** selenium; Эмулятор браузера (драйвер для хрома)  
**1:37** тест через браузер  
**1:38** Получить всю страницу и найти на ней какой-то текст  
**1:40** Тестируем заход на сайт. Для тестировщиков добавляем атрибут id, чтобы им было легче найти  
**1:44** Создали родительский класс и вынесли все общее в него  
**1:45** Находим элементы по cssSelector (по id) и устанавливаем в него данные, а кнопке делаем click. ТАК НИКТО НЕ ДАЛАЕТ))   
**1:48** Создание фреймворка - для разбивки на отдельные действия на странице. Типо набор заранее определенных стандартных действий  
**1:52** Вынесение селекторов в константы (класс By) сам By это критерий для поиска докуменов  
**1:56** id для кнопки "Выйти"  
**2:02** Время ожидания добавили (Есть общее время и частое)  
**2:05** Тест прошел  
**2:06** Для страниц пишем пейжи и работаем через них  
**2:06** Про класс WebDriverWait ждем пока ... не более ... секунд  
**2:13** ДЗ - написать 5 - 10 тестов для маркета  
  
**Доп. инфо.**
JUnit: The de-facto standard for unit testing Java applications.  
Spring Test & Spring Boot Test: Utilities and integration test support for Spring Boot applications.  
AssertJ: A fluent assertion library.  
Hamcrest: A library of matcher objects (also known as constraints or predicates).  
Mockito: A Java mocking framework.  
JSONassert: An assertion library for JSON.  
JsonPath: XPath for JSON.  

**Какие тесты написать для ДЗ:**  
1. Тест через браузер  
2. Тест БД  
3. Тест RESTController-а  
4. Тест куда перекинет залогиненного  
5. Тест отдельных элементов (например сервисы) Используем Моки  
